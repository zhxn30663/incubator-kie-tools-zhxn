#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

#####################################
# 数据库历史API配置
#####################################
database.api.server-ip=localhost
database.api.server-port=5000
database.api.base-url=http://${database.api.server-ip}:${database.api.server-port}/DataAdapter

#####################################
# Quarkus REST Client 配置
#####################################
# 配置REST客户端URL（使用OpenAPI规范中定义的服务器变量）
quarkus.rest-client."database-history-api".url=${database.api.base-url}
quarkus.rest-client."database-history-api".scope=javax.inject.Singleton

# 连接超时（毫秒）
quarkus.rest-client."database-history-api".connect-timeout=10000
# 读取超时（毫秒）
quarkus.rest-client."database-history-api".read-timeout=30000

#####################################
# Kogito服务配置
#####################################
kogito.service.url=http://localhost:${quarkus.http.port}

#####################################
# Quarkus HTTP配置
#####################################
quarkus.http.port=8080
quarkus.http.host=0.0.0.0
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

#####################################
# 日志配置
#####################################
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO
quarkus.log.category."org.acme".level=DEBUG
quarkus.log.category."org.kie".level=INFO

#####################################
# Serverless Workflow配置
#####################################
# 启用workflow自动发现
kogito.sw.auto-discovery=true

#####################################
# 开发模式配置
#####################################
%dev.quarkus.log.level=DEBUG
%dev.database.api.server-ip=localhost
%dev.database.api.server-port=5000

#####################################
# 生产模式配置
#####################################
# 在生产环境中，通过环境变量配置数据库API地址
%prod.database.api.server-ip=${DATABASE_API_SERVER_IP:localhost}
%prod.database.api.server-port=${DATABASE_API_SERVER_PORT:5000}

#####################################
# 容器镜像构建配置
#####################################
%container.quarkus.container-image.build=true
%container.quarkus.container-image.push=false
%container.quarkus.container-image.group=${USER}
%container.quarkus.container-image.registry=dev.local
%container.quarkus.container-image.tag=1.0-SNAPSHOT
%container.quarkus.jib.jvm-entrypoint=/home/kogito/kogito-app-launch.sh
%container.quarkus.jib.base-jvm-image=registry.access.redhat.com/ubi9/openjdk-17:1.21
%container.quarkus.jib.working-directory=/home/kogito/bin

#####################################
# 健康检查配置
#####################################
quarkus.smallrye-health.ui.enable=true
quarkus.smallrye-health.ui.root-path=/q/health-ui

#####################################
# OpenAPI/Swagger配置
#####################################
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/q/swagger-ui
